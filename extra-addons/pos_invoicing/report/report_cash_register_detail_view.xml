<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_report_cash_register_detail_tree" model="ir.ui.view">
          <field name="name">report.cash.register.detail.tree</field>
          <field name="model">report.cash.register.detail</field>
          <field name="type">tree</field>
          <field name="arch" type="xml">
              <tree string="Point of Sale Cash Register Detailed Analysis">
                  <field name="date" invisible="1"/>
                  <field name="user_id" invisible="1"/>
                  <field name="state" invisible="1"/>
                  <field name="year" invisible="1"/>
                  <field name="month" invisible="1"/>
                  <field name="day" invisible="1"/>
                  <field name="journal_id" invisible="1"/>
                  <field name="name" invisible="1"/>
                  <field name="account_id" invisible="1"/>
                  <field name="shop_id" invisible="1"/>
                  <field name="pos_id" invisible="1"/>
                  <field name="amount" />
              </tree>
          </field>
        </record>

        <record id="view_report_cash_register_detail_search" model="ir.ui.view">
          <field name="name">report.cash.register.detail.search</field>
          <field name="model">report.cash.register.detail</field>
          <field name="type">search</field>
          <field name="arch" type="xml">
              <search string="Point of Sale Cash Register Detailed Analysis">
                  <group>
                      <filter icon="terp-go-year" string="Year" name="year"
                          domain="[('year','=',time.strftime('%%Y'))]"
                          help="Cash Analysis created during this year"/>
                      <separator orientation="vertical"/>

                      <filter icon="terp-go-month" string="Month" name="This Month"
                          domain="[('date','&lt;=',(datetime.date.today()+relativedelta(day=31)).strftime('%%Y-%%m-%%d')),('date','&gt;=',(datetime.date.today()-relativedelta(day=1)).strftime('%%Y-%%m-%%d'))]"
                          help="Cash Analysis created in current month"/>
                      <filter icon="terp-go-month"
                           string="Month -1"
                           domain="[('date','&lt;=', (datetime.date.today() - relativedelta(day=31, months=1)).strftime('%%Y-%%m-%%d')),('date','&gt;=',(datetime.date.today() - relativedelta(day=1,months=1)).strftime('%%Y-%%m-%%d'))]"
                           help="Cash Analysis created in last month"/>
                      <separator orientation="vertical"/>
                      <filter icon="terp-go-today"
                             string="    Today    "
                             name="today"
                             domain="[('date','=', time.strftime('%%Y-%%m-%%d'))]"
                             help="Cash Analysis created by today"/>
                      <separator orientation="vertical"/>
                        <filter icon="terp-document-new"
                            string="Draft"
                            domain="[('state','=',('draft'))]"/>
                      <filter icon="terp-camera_test"
                          string="Confirm"
                          domain="[('state','=',('confirm'))]"/>
                        <separator orientation="vertical"/>
                        <field name="user_id" widget="selection">
                        <filter icon="terp-personal"
                            string="My Sales"
                            help="My Sales"
                            domain="[('user_id','=',uid)]"/>
                        </field>
                        <field name="shop_id" widget="selection"/>
                    </group>
                    <newline/>
                  <group expand="1" string="Group By...">
                      <filter string="Shop" icon="terp-personal" context="{'group_by':'shop_id'}"/>
                      <filter string="User" name="User" icon="terp-personal" context="{'group_by':'user_id'}"/>
                      <filter string="Journal" icon="terp-folder-orange" context="{'group_by':'journal_id'}"/>
                      <filter string="Account" icon="terp-folder-orange" context="{'group_by':'account_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Register" icon="terp-folder-orange" context="{'group_by':'name'}"/>
                        <filter string="state" icon="terp-stock_effects-object-colorize" context="{'group_by':'state'}"/>
                      <separator orientation="vertical"/>
                        <filter string="POS Order" icon="terp-folder-orange" context="{'group_by':'pos_id'}"/>
                      <separator orientation="vertical"/>
                        <filter string="Day" icon="terp-go-today" context="{'group_by':'day'}" help="Day from Creation date of cash register"/>
                        <filter string="Month" icon="terp-go-month" context="{'group_by':'month'}" help="Month from Creation date of cash register"/>
                        <filter string="Year" icon="terp-go-year" context="{'group_by':'year'}" help="Year from Creation date of cash register"/>
                  </group>
              </search>
          </field>
        </record>

        <record id="action_report_cash_register_detail_all" model="ir.actions.act_window">
          <field name="name">Register Detailed Analysis</field>
          <field name="res_model">report.cash.register.detail</field>
          <field name="view_type">form</field>
          <field name="view_mode">tree,form</field>
          <field name="search_view_id" ref="view_report_cash_register_detail_search"/>
          <field name="context">{'search_default_year':1,'search_default_This Month':1,'search_default_today':1,'search_default_User':1,'group_by_no_leaf':1,'group_by':[]}</field>
      </record>

      <menuitem action="action_report_cash_register_detail_all" id="menu_report_cash_register_detail_all" parent="point_of_sale.menu_point_rep" sequence="10"/>
  </data>
</openerp>
